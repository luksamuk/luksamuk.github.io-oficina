<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Oficina Framework: Installation and Usage</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_opaque.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Oficina Framework
   &#160;<span id="projectnumber">1.3</span>
   </div>
   <div id="projectbrief">Games Framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('gonglyofic.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Installation and Usage </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="usage_sec"></a>
Usage</h1>
<h2><a class="anchor" id="controls_subsec"></a>
Controls</h2>
<p>If there's a controller connected to the computer, Oficina will detect it as soon as it's initiated. The controls used inside the program are referenced from the Xbox 360 buttons bindings.<br />
Warning: If your controller supports vibration, it'll be activated. The use of vibration and its support detection can be seen on the debugger, as well as a big number of other features.</p>
<h2><a class="anchor" id="debug_subsec"></a>
Debugger</h2>
<p>Oficina's internal debugger brings a series of information related to input, screen refresh rate, processor and memory usage (the memory usage is only monitored on Linux system), as well as many other things.<br />
To bring up the debugger, press F1.<br />
To alternate between complete and compact versions, press F2.</p>
<h2><a class="anchor" id="arguments_subsec"></a>
Arguments</h2>
<p>There are some command line arguments which you can use to setup a few settings.<br />
These arguments can be entered by executing one of the game's startup scripts (e.g. rungame.sh/bat) from the command line (Linux and Windows alike), via a shortcut (Windows), or via another startup script which calls one of the startup scripts with arguments (Linux and Windows alike, too).</p>
<h3><a class="anchor" id="multiplayer_subsubsec"></a>
Multiplayer</h3>
<p>It is possible to play using multiplayer on the current Oficina test build.<br />
It is necessary, though, to enable this resource using a command line or a terminal; The option for this resource on the pause menu is unavailable.<br />
THIS ARGUMENT WILL ONLY RUN ON THE TEST PROGRAM.<br />
On Linux, all you need to do is navigate to the game folder and start it with:</p>
<div class="fragment"><div class="line">./rungame.sh -networktarget=XXX.XXX.XXX.XXX:PPPP</div></div><!-- fragment --><p>And on Windows, you can run:</p>
<div class="fragment"><div class="line">rungame.bat -networktarget=XXX.XXX.XXX.XXX:PPPP</div></div><!-- fragment --><p>Where XXX.XXX.XXX.XXX is the IP address of the destination computer, followed by the port you wish to deliver your packages on the other player's computer.<br />
You can also specify which port you want to listen to by using the following argument:</p>
<div class="fragment"><div class="line">./rungame.sh -port=PPPP</div></div><!-- fragment --> <div class="fragment"><div class="line">rungame.bat -port=PPPP</div></div><!-- fragment --><p>Where PPPP is the desired port you wish to open.<br />
THIS ARGUMENT WILL ALSO ONLY RUN ON THE TEST PROGRAM.<br />
You can include this and other arguments in the same molds of the network target argument. You can also specify multiple arguments.<br />
Notice that, in some cases, it might be necessary to configure your firewall for the connection to work. Failure on package delivering could be seen on terminal or console, if you execute the program for these means.</p>
<h3><a class="anchor" id="fullscr_subsubsec"></a>
Fullscreen</h3>
<p>To run the game on fullscreen mode, run Oficina including the fullscreen argument.</p>
<div class="fragment"><div class="line">./rungame.sh --fullscreen</div></div><!-- fragment --> <div class="fragment"><div class="line">rungame.bat --fullscreen</div></div><!-- fragment --><p>On Linux systems, Oficina will attempt to make the window size fit your current native resolution, but internal OpenGL context resolution will remain the same. This is done because of SDL's screen resolution issues when attempting fullscreen with a resolution that is different from your screen monitor's resolution.</p>
<h1><a class="anchor" id="install_sec"></a>
Installation</h1>
<h2><a class="anchor" id="dep_subsec"></a>
Dependancies</h2>
<p>Oficina Framework depends on the following libraries:<br />
</p><ul>
<li>SDL2 (SDL 2.0)</li>
<li>SDL2_image (SDL_image 2.0)</li>
<li>SDL2_mixer (SDL_mixer 2.0)</li>
<li>physfs (PhysicsFS)</li>
<li>OpenGL</li>
</ul>
<p>Make sure you have these libraries installed when building the library or any application depending on it.<br />
Normally, these libraries will be available on your repository. They are all opensource, so you will not have difficulty trying to find them.<br />
There may be subdependancies on libogg/libvorbis or zlib, so make sure you also install them correctly.<br />
</p>
<h2><a class="anchor" id="build_subsec"></a>
Building</h2>
<p>Building Oficina is rather easy.<br />
Having Oficina's source code, navigate to the source folder, and create the required subfolders for building.<br />
</p><div class="fragment"><div class="line">$ mkdir bin lib obj</div></div><!-- fragment --><p> Then, all you need to do is build it with Makefile, using the following command:<br />
</p><div class="fragment"><div class="line">$ make</div></div><!-- fragment --><p> Make sure you are using GCC/MinGW as your compiler, and also make sure you have all the needed dependancies installed.<br />
The objects for building Oficina's static libraries will be stored in obj folder, and the static library itself will be stored in lib.<br />
Notice that, running the command "make" alone will only generate the library with debug mode active (liboficinad.a).<br />
If you wish to build Oficina on Release target, you must run the make command like this:<br />
</p><div class="fragment"><div class="line">$ make target=release</div></div><!-- fragment --><p> This will create liboficina.a on lib/ folder instead.<br />
Make sure to clean the objects generated from the previous compilation, else you may face building problems!<br />
To clean the objects, run:<br />
</p><div class="fragment"><div class="line">$ make clean</div></div><!-- fragment --><h3><a class="anchor" id="testbuild_subsubsec"></a>
Test Build Application</h3>
<p>You can also build the Test Build application to test Oficina.<br />
To do so, execute the following command:<br />
</p><div class="fragment"><div class="line">$ make test</div></div><!-- fragment --><p> If you wish to run the Test Build application under Release target, add the target flag to the end of this command:<br />
</p><div class="fragment"><div class="line">$ make test target=release</div></div><!-- fragment --><h2><a class="anchor" id="install_subsec"></a>
Installing</h2>
<p>Installing Oficina Framework on a Linux environment is also easy.<br />
All you need to do is navigate to the folder and run:<br />
</p><div class="fragment"><div class="line">$ make install</div></div><!-- fragment --><p> You may need superuser privileges to run this action.<br />
This will build both Debug and Release targets of Oficina and copy them and the required headers to your local prefix' (normally /usr/local) include and lib subfolders.<br />
If you wish to change the prefix to, say, /usr, run the installation using the following command:<br />
</p><div class="fragment"><div class="line">$ make install prefix=/usr</div></div><!-- fragment --><p> Windows users will want to build each target separately, then manually copy the contents of lib/ into their MinGW/lib folder, and also copy both the folder <a class="el" href="namespace_oficina_framework.html">OficinaFramework</a> (the one containing only headers) and the file GonglyScriptStructure.h into MinGW/include.</p>
<h2><a class="anchor" id="uninstall_subsec"></a>
Uninstalling</h2>
<p>You can also uninstall Oficina Framework using the Makefile.<br />
Just run<br />
</p><div class="fragment"><div class="line">$ make uninstall</div></div><!-- fragment --><p> You may need superuser privileges to run this action.<br />
If you installed it on another prefix, say, /usr, then you may also want to explicitly show that to the Makefile by running:<br />
</p><div class="fragment"><div class="line">$ make uninstall prefix=/usr</div></div><!-- fragment --><p> Windows users will want to manually remove both files liboficina.a and liboficinad.a from MinGW/lib folder, the folder MinGW/include/OficinaFramework and the file MinGW/include/GonglyScriptStructure.h.</p>
<h2><a class="anchor" id="build_your_own_subsec"></a>
Building Your Own Application</h2>
<p>To build your own application, you must use the correct build flags.<br />
After correctly installing Oficina and its dependancies, you will want to compile your own code like this:<br />
</p><div class="fragment"><div class="line"><span class="preprocessor"># On Linux</span></div><div class="line">$ g++ --std=c++11 your_source_code_and_objects_here -o output_executable_name -loficinad -lSDL2 -lSDL2_image -lSDL2_mixer -lGL -lphysfs</div><div class="line"><span class="preprocessor"># On Windows</span></div><div class="line"><span class="preprocessor">$ g++ --std=c++11 your_source_code_and_objects_here -o output_executable_name -loficinad -lmingw32 -lSDL2main -lSDL2 -lSDL2_image -lSDL2_mixer -lopengl32 -lwsock32 -lphysfs</span></div></div><!-- fragment --><p> Notice the following:<br />
</p><ul>
<li>Oficina's statically linked through the command -loficinad. Notice that, the presence of the character "d" in the end of the flag refers to a debug compilation. To link for release targets, use the flag -loficina instead.</li>
<li>Oficina's linking flags MUST STRICTLY come before the flags shown on the commands above, or else there will be undefined reference errors, although order of the dependancy flags are not important, as long as they come after Oficina's (with exception of the -lmingw32 -lSDL2main flags, which must also come between Oficina's and the rest);</li>
<li>Oficina is built under C++11, so your code must also be built under C++11 specification;</li>
<li>Oficina's debug static library is built with DEBUG_ENABLED flag active, but it isn't activated by default in your application. To achieve that, add the flag -DDEBUG_ENABLED to your build command.</li>
</ul>
<p>If you're using an IDE like Code::Blocks, you'll want to configure your building targets to use these linking targets accordingly. This is normally done on C::B by right-clicking the project name on the Projects tree and clicking "Build Options". Creating Defines (like the DEBUG_ENABLED case) can also be done from there.</p>
<h2><a class="anchor" id="command_line_args_subsec"></a>
Command Line Arguments</h2>
<p>Any game compiled with Oficina Framework has a number of fixed argument flags that can be run from any application.<br />
These flags are configuration flags, normally for setting framerate and resolution configuration, and are normally used on the Gongly Launcher.<br />
The flags are:<br />
</p><div class="fragment"><div class="line">--fullscreen</div></div><!-- fragment --><p> Sets the window to full screen size.<br />
 </p><div class="fragment"><div class="line">--resolution=x</div></div><!-- fragment --><p> Sets both Window Size and Resolution to "x".<br />
Refer to <a class="el" href="gameargs_usage.html#resolution_sec">Screen Resolution</a> or <a class="el" href="gameargs_usage.html#wnd_sec">Window Size</a> for possible values, as they're strictly related.<br />
 </p><div class="fragment"><div class="line">--vsync</div></div><!-- fragment --><p> Enables vertical synchro.<br />
Refer to <a class="el" href="gameargs_usage.html#vsync_enable_sec">Enable Vertical Synchro</a> for more details.<br />
 </p><div class="fragment"><div class="line">--fps=x</div></div><!-- fragment --><p> Sets default framerate for the application to "x".<br />
Refer to <a class="el" href="gameargs_usage.html#fps_sec">Framerate</a> for possible values.<br />
 </p><div class="fragment"><div class="line">--diagnostics</div></div><!-- fragment --><p> Enables system diagnostics, if application was compiled in debug mode and has a font binded to the debug window.<br />
 </p><div class="fragment"><div class="line">--no_multithreaded_audio</div></div><!-- fragment --><p> Forces program to run audio loop on the same rendering and logic thread.<br />
This may lower CPU consumption, but may also cause BGM loops to not work properly.<br />
 </p><div class="fragment"><div class="line">--no-bgm</div></div><!-- fragment --><p> Mutes ALL background music.<br />
 </p><div class="fragment"><div class="line">--no-sfx</div></div><!-- fragment --><p> Mutes ALL sound effects.<br />
 </p><div class="fragment"><div class="line">--version</div><div class="line">-v</div></div><!-- fragment --><p> Forces application to output which version of Oficina it was compiled with then halts the application.<br />
</p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Apr 27 2017 11:11:37 for Oficina Framework by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
